<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIAワーク：強みの特定と活用</title>
<style>
    body { font-family: sans-serif; background-color: #f0f2f5; padding: 20px; color: #333; }
    .container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    h1 { font-size: 22px; color: #2c3e50; text-align: center; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
    .instruction { font-size: 14px; color: #666; margin-bottom: 20px; line-height: 1.6; }
    .question { margin-bottom: 15px; padding: 10px; border-bottom: 1px dashed #eee; }
    .question p { margin: 0 0 10px 0; font-weight: bold; font-size: 15px; }
    .options { display: flex; gap: 10px; justify-content: space-around; }
    .options label { font-size: 13px; cursor: pointer; }
    button { width: 100%; padding: 15px; background: #3498db; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin-top: 20px; }
    button:hover { background: #2980b9; }
    #resultArea, #planArea { display: none; margin-top: 30px; padding: 20px; background: #e8f4fd; border-radius: 8px; }
    .strength-tag { display: inline-block; background: #3498db; color: white; padding: 5px 12px; border-radius: 20px; margin: 5px; font-size: 14px; }
    textarea { width: 100%; height: 100px; margin-top: 10px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box; }
    .step-title { color: #e67e22; font-weight: bold; margin-top: 20px; display: block; }
</style>
</head>
<body>

<div class="container">
    <h1>VIAワーク：強みの特定と活用</h1>
    
    <div id="quizArea">
        <p class="instruction">
            以下の項目について、あなたにどのくらい当てはまるか直感で答えてください。<br>
            （1: 全く当てはまらない ～ 5: 非常によく当てはまる）
        </p>
        <div id="questionsContainer"></div>
        <button onclick="calculateStrengths()">強みを特定する</button>
    </div>

    <div id="resultArea">
        <h2>あなたの主な強み</h2>
        <div id="topStrengths"></div>
        <p class="instruction" style="margin-top:15px;">
            これらはあなたの「シグネチャー・ストレングス（自分を特徴づける強み）」の候補です。これらを使うとき、ワクワクしたり、自分らしいと感じたりしませんか？
        </p>
        <button onclick="showPlan()">活用計画を立てる（次のステップへ）</button>
    </div>

    <div id="planArea">
        <h2>強みの活用計画</h2>
        <p class="instruction">
            特定された強みのうち、1つを選んで<b>「今までとは違う新しい使い方」</b>を計画しましょう。
        </p>
        
        <span class="step-title">1. 活用する強み</span>
        <select id="selectedStrength" style="width:100%; padding:10px; margin-top:5px;"></select>

        <span class="step-title">2. 今までとは違う「新しい」使い方（いつ、どこで、何を？）</span>
        <textarea id="actionPlan" placeholder="例：『親切心』の強みを、いつもは家族に使っているが、明日は職場のあまり話さない同僚に対して、小さな手助けをする形で使ってみる。"></textarea>

        <button onclick="finishWork()">計画を確定する</button>
    </div>
</div>

<script>
    const strengthsData = [
        { id: "curiosity", name: "好奇心", q: "新しいことや未知のことに興味を惹かれますか？" },
        { id: "kindness", name: "親切心", q: "他人のために何かをしたり、手助けをすることに喜びを感じますか？" },
        { id: "perseverance", name: "忍耐力", q: "困難があっても、一度始めたことは最後までやり遂げますか？" },
        { id: "gratitude", name: "感謝", q: "日常の小さな幸せに気づき、感謝を伝えることができますか？" },
        { id: "fairness", name: "公平性", q: "偏見を持たず、すべての人を平等に扱うことを大切にしていますか？" },
        { id: "bravery", name: "勇敢さ", q: "怖くても、正しいと思うことのために行動できますか？" }
    ];

    const container = document.getElementById('questionsContainer');
    strengthsData.forEach((s, index) => {
        const div = document.createElement('div');
        div.className = 'question';
        div.innerHTML = `
            <p>${index + 1}. ${s.q}</p>
            <div class="options">
                ${[1, 2, 3, 4, 5].map(v => `
                    <label><input type="radio" name="${s.id}" value="${v}"> ${v}</label>
                `).join('')}
            </div>
        `;
        container.appendChild(div);
    });

    function calculateStrengths() {
        const results = [];
        strengthsData.forEach(s => {
            const val = document.querySelector(`input[name="${s.id}"]:checked`);
            if (val) {
                results.push({ name: s.name, score: parseInt(val.value) });
            }
        });

        if (results.length < strengthsData.length) {
            alert("すべての質問に答えてください。");
            return;
        }

        // スコア順に並び替え
        results.sort((a, b) => b.score - a.score);
        const topOnes = results.filter(r => r.score >= 4);

        if (topOnes.length === 0) {
            alert("高得点の強みが見つかりませんでした。最も点数が高かったものを表示します。");
            topOnes.push(results[0]);
        }

        const topArea = document.getElementById('topStrengths');
        const select = document.getElementById('selectedStrength');
        topArea.innerHTML = "";
        select.innerHTML = "";

        topOnes.forEach(r => {
            const span = document.createElement('span');
            span.className = 'strength-tag';
            span.innerText = r.name;
            topArea.appendChild(span);

            const opt = document.createElement('option');
            opt.value = r.name;
            opt.innerText = r.name;
            select.appendChild(opt);
        });

        document.getElementById('quizArea').style.display = 'none';
        document.getElementById('resultArea').style.display = 'block';
    }

    function showPlan() {
        document.getElementById('resultArea').style.display = 'none';
        document.getElementById('planArea').style.display = 'block';
    }

    function finishWork() {
        const strength = document.getElementById('selectedStrength').value;
        const plan = document.getElementById('actionPlan').value;
        if (!plan) {
            alert("計画を入力してください。");
            return;
        }
        alert(`計画を保存しました！\n\n【${strength}】を活かした新しい行動を明日から実践しましょう。`);
        location.reload();
    }
</script>

</body>
</html>