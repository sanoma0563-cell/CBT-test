<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚«ãƒ†ã‚´ãƒªHï¼šçµ‚çµã¨å†ç™ºäºˆé˜²ãƒ¯ãƒ¼ã‚¯</title>
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background-color: #f8f9fa; margin: 0; padding: 20px; color: #333; line-height: 1.6; }
        .container { max-width: 700px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); min-height: 550px; display: flex; flex-direction: column; }
        h1 { font-size: 20px; text-align: center; color: #28a745; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 0; }
        
        #display-area { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; margin-top: 20px; }
        .msg { font-size: 17px; margin-bottom: 15px; animation: fadeIn 0.4s ease; }
        .speaker-label { font-weight: bold; font-size: 13px; margin-bottom: 5px; padding: 2px 8px; border-radius: 4px; display: inline-block; }
        .label-counselor { background: #e8f5e9; color: #2e7d32; }
        .label-client { background: #fff3e0; color: #e65100; }
        .label-narration { background: #f5f5f5; color: #616161; border: 1px solid #ddd; }

        .nav-btns { display: flex; justify-content: space-between; gap: 10px; margin-top: 20px; }
        button { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 15px; transition: 0.3s; }
        .next-btn { background: #28a745; color: white; flex-grow: 2; }
        .prev-btn { background: #ced4da; color: #495057; flex-grow: 1; }
        
        .options-grid { display: grid; gap: 12px; margin-top: 10px; }
        .opt-btn { background: #fff; border: 2px solid #28a745; color: #28a745; text-align: left; line-height: 1.4; padding: 15px; }
        .opt-btn:hover { background: #f0fff4; border-color: #1e7e34; }

        .plan-box { background: #f0f4ff; border: 2px dashed #4a6cf7; padding: 15px; border-radius: 8px; font-size: 14px; margin: 10px 0; }
        .feedback-bad { color: #d32f2f; background: #fff1f0; padding: 10px; border-radius: 5px; border: 1px solid #ffa39e; margin-top: 10px; font-size: 14px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>å†ç™ºäºˆé˜²ï¼šè‡ªç«‹ã¸ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h1>
    
    <div id="display-area"></div>

    <div class="nav-btns" id="nav-btns">
        <button id="prev" class="prev-btn" onclick="goPrev()">æˆ»ã‚‹</button>
        <button id="next" class="next-btn" onclick="goNext()">èª­ã¿é€²ã‚ã‚‹</button>
    </div>
</div>

<script>
    const story = [
        { id: 0, type: "narration", text: "ã‚¿ã‚«ã‚·ã•ã‚“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚‚ã„ã‚ˆã„ã‚ˆçµ‚ç›¤ã§ã™ã€‚ç—‡çŠ¶ã¯å®‰å®šã—ã€è‡ªåˆ†ã‹ã‚‰é€²ã‚“ã§ã‚³ãƒ¼ãƒ”ãƒ³ã‚°ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚" },
        { id: 1, type: "client", text: "ã€Œå…ˆç”Ÿã€æœ€è¿‘ã¯èª¿å­ãŒè‰¯ãã¦ã€SNSã‚‚ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã¦ã„ã¾ã™ã€‚ã§ã‚‚â€¦ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ãŒçµ‚ã‚ã‚‹ã¨æ€ã†ã¨ã€ã¾ãŸå…ƒã«æˆ»ã£ã¦ã—ã¾ã†ã‚“ã˜ã‚ƒãªã„ã‹ã¨ä¸å®‰ãªã‚“ã§ã™ã€‚ã€" },
        { id: 2, type: "choice", q: "çµ‚çµã«å‘ã‘ã¦ã€ã©ã®ã‚ˆã†ãªã€Œå†ç™ºã€ã®æ‰ãˆæ–¹ã‚’æç¤ºã—ã¾ã™ã‹ï¼Ÿï¼š", options: [
            { text: "ã€Œã‚‚ã†ã‚¹ã‚­ãƒ«ã‚’èº«ã«ã¤ã‘ãŸã®ã§ã€äºŒåº¦ã¨å†ç™ºã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è‡ªä¿¡ã‚’æŒã£ã¦ãã ã•ã„ã€‚ã€", next: 3 },
            { text: "ã€Œä»Šå¾Œã€èª¿å­ã®æ³¢ãŒæ¥ã‚‹ã“ã¨ã¯è‡ªç„¶ãªã“ã¨ã§ã™ã€‚å¤§åˆ‡ãªã®ã¯ã€å†ç™ºã•ã›ãªã„ã“ã¨ã€ã§ã¯ãªãã€äºˆå…†ã«æ°—ã¥ã„ã¦å¯¾å‡¦ã™ã‚‹ã“ã¨ã€ã§ã™ã€‚ã€", next: 5 }
        ]},
        // ãƒŸã‚¹ãƒ«ãƒ¼ãƒˆ
        { id: 3, type: "client", text: "ã€ŒäºŒåº¦ã¨ãªã„â€¦ï¼Ÿ å…ˆç”Ÿã«ãã†è¨€ã‚ã‚Œã‚‹ã¨ã€ã‚‚ã—å°‘ã—ã§ã‚‚ã‚¹ãƒãƒ›ã‚’è¦‹ã™ãã¦ã—ã¾ã£ãŸã‚‰ã€ã‚‚ã†ãŠã—ã¾ã„ã ã¨æ€ã£ã¦ã—ã¾ã„ãã†ã§ã™â€¦ï¼ˆéåº¦ãªãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’æ„Ÿã˜ã¦ã„ã¾ã™ï¼‰ã€" },
        { id: 4, type: "narration", text: "ã€ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰ã€‘ã€ŒäºŒåº¦ã¨èµ·ã“ã‚‰ãªã„ã€ã¨ã„ã†éç¾å®Ÿçš„ãªä¿è¨¼ã¯ã€å°ã•ãªãƒŸã‚¹ã‚’ã€Œå¤§å¤±æ•—ï¼ˆå†ç™ºï¼‰ã€ã¨æ‰ãˆã•ã›ã‚‹ã€Œã‚¢ãƒ–ã‚¹ãƒ†ã‚£ãƒãƒ³ã‚¹ãƒ»ãƒã‚¤ã‚ªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœã€ã‚’ç”Ÿã‚“ã§ã—ã¾ã„ã¾ã™ã€‚", isBad: true },
        
        // æ­£è§£ãƒ«ãƒ¼ãƒˆ
        { id: 5, type: "client", text: "ã€Œäºˆå…†ã«æ°—ã¥ã„ã¦å¯¾å‡¦ã™ã‚‹â€¦ãã‚Œãªã‚‰ã§ããã†ã§ã™ã€‚ã§ã‚‚ã€è‡ªåˆ†ãŒå±ãªã„ã£ã¦ã„ã†ã‚µã‚¤ãƒ³ã«ã€è‡ªåˆ†ã§æ°—ã¥ã‘ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿã€" },
        { id: 6, type: "choice", q: "å†ç™ºäºˆé˜²ãƒ—ãƒ©ãƒ³ï¼ˆãƒªãƒ©ãƒ—ã‚¹ãƒ»ãƒ—ãƒ©ãƒ³ï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚ä½•ã‚’ãƒªã‚¹ãƒˆåŒ–ã—ã¾ã™ã‹ï¼Ÿï¼š", options: [
            { text: "ã€Œã“ã‚Œã¾ã§ä¸Šæ‰‹ãã„ã£ãŸã“ã¨ã‚’å…¨ã¦æ›¸ãå‡ºã—ã€ãã‚Œã‚’æ¯æ—¥æ¬ ã‹ã•ãšã‚„ã‚‹ã‚ˆã†ãƒ«ãƒ¼ãƒ«åŒ–ã—ã¾ã—ã‚‡ã†ã€‚ã€", next: 7 },
            { text: "ã€Œã‚¿ã‚«ã‚·ã•ã‚“ã®èª¿å­ãŒæ‚ªããªã‚‹æ™‚ã®ã€æ—©æœŸè­¦æˆ’ã‚µã‚¤ãƒ³ï¼ˆç¡çœ ã€æ€è€ƒã€æ°—åˆ†ã®å¤‰åŒ–ï¼‰ã€ã‚’ä¸€ç·’ã«æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã€", next: 9 }
        ]},
        // ãƒŸã‚¹ãƒ«ãƒ¼ãƒˆ
        { id: 7, type: "client", text: "ã€Œæ¯æ—¥å…¨éƒ¨ã‚„ã‚‹ã®ã¯å¤§å¤‰ãã†ã§ã™â€¦ã€‚ã§ããªã„æ—¥ãŒã‚ã‚‹ã¨ã€ãã‚Œã ã‘ã§ã€ã‚ãå†ç™ºã ã€ã£ã¦æ€ã£ã¦ã—ã¾ã„ãã†ã§æ€–ã„ã§ã™ã€‚ã€" },
        { id: 8, type: "narration", text: "ã€ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰ã€‘å³æ ¼ã™ãã‚‹ãƒ«ãƒ¼ãƒ«ã¯ç¶­æŒãŒé›£ã—ãã€æŒ«æŠ˜æ„Ÿã‚’ç”Ÿã¿ã‚„ã™ã„ã§ã™ã€‚å¤‰åŒ–ã«æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ãƒ—ãƒ©ãƒ³ãŒå¿…è¦ã§ã™ã€‚", isBad: true },

        // æ­£è§£ãƒ«ãƒ¼ãƒˆ
        { id: 9, type: "client", text: "ã€Œãã†ã§ã™ã­ã€‚åƒ•ã®å ´åˆã€å¤œæ›´ã‹ã—ãŒå¢—ãˆãŸã‚Šã€ã€ã©ã†ã›è‡ªåˆ†ãªã‚“ã¦ã€ã¨ã„ã†è€ƒãˆãŒé ­ã‚’ã‚ˆãã‚Šå§‹ã‚ãŸã‚‰ã€å±ãªã„ã‚µã‚¤ãƒ³ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã€" },
        { id: 10, type: "choice", q: "ã‚µã‚¤ãƒ³ã«æ°—ã¥ã„ãŸæ™‚ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå¯¾å‡¦æ³•ï¼‰ã‚’æ±ºã‚ã¾ã™ï¼š", options: [
            { text: "ã€Œã‚µã‚¤ãƒ³ãŒå‡ºãŸã‚‰ã€ã™ãã«ç§ã«é›»è©±ã—ã¦äºˆç´„ã‚’å–ã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚ã€", next: 11 },
            { text: "ã€Œãã®ã‚µã‚¤ãƒ³ãŒå‡ºãŸæ™‚ã«ä½¿ãˆã‚‹ã€ä¸€ç•ªåŠ¹æœçš„ã ã£ãŸã‚¹ã‚­ãƒ«ã‚’3ã¤é¸ã‚“ã§ã€æ‰‹é †æ›¸ã«ã—ã¦ãŠãã¾ã›ã‚“ã‹ï¼Ÿã€", next: 13 }
        ]},
        // ãƒŸã‚¹ãƒ«ãƒ¼ãƒˆ
        { id: 11, type: "client", text: "ã€Œå…ˆç”Ÿã«é ¼ã‚Œã°å®‰å¿ƒã§ã™ãŒâ€¦ã„ã¤ã¾ã§ã‚‚å…ˆç”ŸãŒã„ãªã„ã¨ãƒ€ãƒ¡ãªè‡ªåˆ†ã€ã¨ã„ã†æ„Ÿã˜ãŒã—ã¦å°‘ã—å¯‚ã—ã„ã§ã™ã€‚ã€" },
        { id: 12, type: "narration", text: "ã€ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰ã€‘çµ‚çµã®ç›®çš„ã¯ã€Œã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆãŒè‡ªåˆ†è‡ªèº«ã®ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ã€ã§ã™ã€‚ä¾å­˜ã‚’å¼·ã‚ã‚‹ææ¡ˆã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚", isBad: true },

        // æ­£è§£ãƒ«ãƒ¼ãƒˆ
        { id: 13, type: "client", text: "ã€Œã„ã„ã§ã™ã­ï¼ã¾ãšã¯ã‚¹ãƒãƒ›ã‚’ç½®ã„ã¦æ•£æ­©ã«è¡Œãã€æ¬¡ã«ä¾¡å€¤ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ç›´ã™â€¦ã¨ã„ã†æ‰‹é †ã‚’æ±ºã‚ã¦ãŠã‘ã°ã€ãƒ‘ãƒ‹ãƒƒã‚¯ã«ãªã‚‰ãšã«æ¸ˆã¿ãã†ã§ã™ã€‚ã€" },
        { id: 14, type: "plan", title: "ã‚¿ã‚«ã‚·ã•ã‚“ã®å†ç™ºäºˆé˜²ãƒ—ãƒ©ãƒ³", sign: "å¤œæ›´ã‹ã—ã€è‡ªè²¬æ€è€ƒã€ç„¡æ°—åŠ›", action: "â‘ ã‚¹ãƒãƒ›ã‚’åˆ¥å®¤ã«ç½®ã â‘¡5åˆ†é–“ã®ãƒã‚¤ãƒ³ãƒ‰ãƒ•ãƒ«ãƒã‚¹ â‘¢æ•£æ­©" },
        
        { id: 15, type: "choice", q: "ã€æœ€å¾Œã®å•ã„ã‹ã‘ã€‘çµ‚çµã«ã‚ãŸã£ã¦ï¼š", options: [
            { text: "ã€Œä¸‡ãŒä¸€ã€è‡ªåˆ†ä¸€äººã§å¯¾å‡¦ã§ããªã„æ™‚ã¯ã€ã„ã¤ã§ã‚‚ã¾ãŸã“ã“ã‚’é ¼ã£ã¦ã„ã„ã‚“ã§ã™ã‚ˆã€‚ãã‚Œã¯å¤±æ•—ã§ã¯ãªãã€è³¢ã„é¸æŠã§ã™ã€‚ã€", next: 16 },
            { text: "ã€Œä»Šæ—¥ã§çµ‚ã‚ã‚Šã§ã™ã€‚ã‚‚ã†äºŒåº¦ã¨ä¼šã‚ãªã„ã“ã¨ãŒã€ç§ãŸã¡ã®æ²»ç™‚ã®æˆåŠŸã§ã™ã­ã€‚ã€", next: 18 }
        ]},
        // æˆåŠŸ
        { id: 16, type: "client", text: "ã€Œãã‚Œã‚’èã„ã¦å®‰å¿ƒã—ã¾ã—ãŸã€‚å®ˆã‚Šåˆ€ï¼ˆãƒ—ãƒ©ãƒ³ï¼‰ã‚’æŒã£ã¦ã€ã¾ãšã¯ä¸€äººã§æ­©ã„ã¦ã¿ã¾ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ã€" },
        { id: 17, type: "narration", text: "ã€ã‚¯ãƒªã‚¢ã€‘ã‚ãªãŸã¯ã‚¿ã‚«ã‚·ã•ã‚“ã®è‡ªç«‹ã‚’æ”¯ãˆã¤ã¤ã€å¿…è¦ãªæ™‚ã®ã€Œå®‰å…¨ç¶²ã€ã‚‚ç¤ºã—ã¾ã—ãŸã€‚ã“ã‚Œã§å…¨ã¦ã®ã‚«ãƒ†ã‚´ãƒªï¼ˆAã€œHï¼‰ã®å­¦ç¿’ãŒä¿®äº†ã—ã¾ã—ãŸï¼", isFinal: true },

        // ãƒŸã‚¹
        { id: 18, type: "client", text: "ã€Œæœ€å¾Œãªã®ã«ã€çªãæ”¾ã•ã‚ŒãŸã¿ãŸã„ã§æ‚²ã—ã„ã§ã™â€¦ã€‚ã‚‚ã—ã¾ãŸæ‚ªããªã£ãŸã‚‰ã€ã‚‚ã†èª°ã«ã‚‚é ¼ã£ã¡ã‚ƒã„ã‘ãªã„ã‚“ã â€¦ï¼ˆä¸å®‰ãŒå¼·ã¾ã‚Šã¾ã—ãŸï¼‰ã€" },
        { id: 19, type: "narration", text: "ã€ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰ã€‘ã€Œã„ã¤ã§ã‚‚æˆ»ã£ã¦ãã¦ã„ã„ã€ã¨ã„ã†å®‰å…¨æ„ŸãŒã‚ã‚‹ã‹ã‚‰ã“ãã€ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã¯å®‰å¿ƒã—ã¦è‡ªç«‹ã«è¸ã¿å‡ºã›ã¾ã™ã€‚", isBad: true }
    ];

    let currentId = 0;

    function render() {
        const display = document.getElementById('display-area');
        const btns = document.getElementById('nav-btns');
        const item = story.find(s => s.id === currentId);
        
        display.innerHTML = "";
        
        if (item.type === "choice") {
            btns.style.display = "none";
            display.innerHTML = `<div class="msg"><span class="speaker-label label-narration">çµ‚çµã«å‘ã‘ãŸé¸æŠ</span><br>${item.q}</div>`;
            const grid = document.createElement('div');
            grid.className = "options-grid";
            item.options.forEach(opt => {
                const b = document.createElement('button');
                b.className = "opt-btn";
                b.innerText = opt.text;
                b.onclick = () => {
                    currentId = opt.next;
                    btns.style.display = "flex";
                    render();
                };
                grid.appendChild(b);
            });
            display.appendChild(grid);
        } else if (item.type === "plan") {
            display.innerHTML = `
                <div class="plan-box">
                    <strong>ğŸ“‹ ${item.title}</strong><br><br>
                    <strong>æ—©æœŸã‚µã‚¤ãƒ³:</strong> ${item.sign}<br>
                    <strong>å…·ä½“çš„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:</strong> ${item.action}
                </div>
            `;
        } else {
            const labelMap = { counselor: "ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼", client: "ã‚¿ã‚«ã‚·ã•ã‚“", narration: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³" };
            display.innerHTML = `
                <div class="msg">
                    <span class="speaker-label label-${item.type}">${labelMap[item.type]}</span><br>
                    ${item.text}
                </div>
            `;
            if (item.isBad) {
                display.innerHTML += `<div class="feedback-bad">ã‚„ã‚Šç›´ã—ï¼šã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®ã€Œè‡ªç«‹ã€ã¨ã€Œå®‰å¿ƒã€ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚</div>`;
                document.getElementById('next').innerText = "æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™";
            } else if (item.isFinal) {
                document.getElementById('next').innerText = "å…¨èª²ç¨‹ä¿®äº†ï¼";
            } else {
                document.getElementById('next').innerText = "æ¬¡ã«é€²ã‚€";
            }
        }
        document.getElementById('prev').disabled = currentId === 0 || item.isBad;
    }

    function goNext() {
        const item = story.find(s => s.id === currentId);
        if (item.isBad || item.isFinal) {
            currentId = 0;
        } else {
            currentId++;
        }
        render();
    }

    function goPrev() {
        if (currentId > 0) {
            currentId--;
            if (story.find(s => s.id === currentId).type === "choice") currentId--;
            render();
        }
    }
    render();
</script>
</body>
</html>